# Return 200 for ALB health checks without touching Django
location = /health/ {
    access_log off;
    return 200 "ok\n";
}

location = / {
    if ($http_user_agent ~* "ELB-HealthChecker") { return 200; }
    try_files $uri @proxy;
}

location @proxy {
    proxy_pass http://localhost:8000;
}
